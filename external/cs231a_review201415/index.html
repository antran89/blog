<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>reveal.js - The HTML Presentation Framework</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/league-small.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

        <style>
        h2 { color:blue}
        </style>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
                <section> <h2 style="color:#eee"><strong>CS231A TA Session</strong></h2>
					<h3>Problem set 4</h3>
					<p>
						<small><a href="http://chrischoy.org">Christopher B. Choy</a></small>
					</p>
				</section>

				<section>
					<h2>Question 1</h2>
				</section>

				<section>
					<h2>Hough Transform</h2>
					<ul>
                        <li>Transform a point in a cartesian coordinate to</li>
                    	<li>all lines (line parameters) that pass the point in the polar coordinate</li>
                    </ul>
                    <p>$$H: (x, y) \rightarrow \{ (r, \theta) | r(\theta) = x \cos \theta + y \sin \theta \}$$</p>
                    <img width=200 data-src="https://s3.amazonaws.com/media-p.slid.es/uploads/christopherchoy/images/1122863/R_theta_line.GIF">
                    <p>$$y = -\frac{\cos \theta}{\sin \theta} x + \frac{r}{\sin \theta} \rightarrow r(\theta) = x \cos \theta + y \sin \theta$$</p>
				</section>
				<section>
					<h2 >
                         <strong>Generalized Hough Transform</strong>
                    </h2>
                    <ul>
                        <li>feature $\Phi(x)$ to points in the 2D Hough space $S = \{ \vec{a} \}$
                            <ul><li>$\vec{a}$ is the reference origin of the shape</li></ul>
                        </li>

                        <li>For points $\vec{x}$ on the boundary, store $\vec{r} = \vec{a} - \vec{x}$ : R-Table
                    	<ul>
                            <li>As a function of the gradient $\Phi(\vec{x})$</li>
                    		<li>Rotation and scale : 4D Hough Space</li>
                    	</ul>
                    	</li>
                    </ul>
                    <div>
                        <img width=300 data-src="https://s3.amazonaws.com/media-p.slid.es/uploads/christopherchoy/images/1123207/image5-2.gif">
                    </div>
                    <p style="font-size:16px">D.H. Ballard, "Generalizing the Hough Transform to Detect Arbitrary Shapes", Pattern Recognition, Vol.13, No.2, p.111-122, 1981</p>
				</section>

                <section>
					<h2>Implicit Shape Model</h2>
                    <ul>
                    	<li>R-Table as a function of an image patch</li>
                    	<li>transform an image patch to object centers</li>
                    </ul>
                    <img  data-src="https://s3.amazonaws.com/media-p.slid.es/uploads/christopherchoy/images/1123485/Screen_Shot_2015-03-01_at_11.22.24_PM.png">
                    <p style="font-size:16px">B. Leibe, A. Leonardis, and B. Schiele, Combined Object Categorization and Segmentation with an Implicit Shape Model, ECCV 2004 </p>
                </section>

                <section>
                    <h2>Question 2</h2>
                </section>

                <section>
                    <h2><strong>Bag of Visual Words</strong></h2>
                    <table>
                        <tbody>
                            <tr>
                                <td style="vertical-align:middle">
                                Feature Extraction
                                </td>
                                <td>
                                    <img width=150 data-src="https://s3.amazonaws.com/media-p.slid.es/uploads/christopherchoy/images/1123567/feature-extraction-2.png">
                                </td>
                            </tr>
                            <tr>
                                <td style="vertical-align:middle">
                                Clustering
                                </td>
                                <td>
                                    <img width=150 data-src="https://s3.amazonaws.com/media-p.slid.es/uploads/christopherchoy/images/1123631/cluster_1.PNG">
                                </td>
                            </tr>
                            <tr>
                                <td style="vertical-align:middle">
                                Encoding
                                </td>
                                <td>
                                    <img width=150 data-src="https://s3.amazonaws.com/media-p.slid.es/uploads/christopherchoy/images/1123621/encoding.png">
                                </td>
                            </tr>
                            <tr>
                                <td style="vertical-align:middle">
                                Spatial Binning
                                </td>
                                <td>
                                    <img width=150 data-src="https://s3.amazonaws.com/media-p.slid.es/uploads/christopherchoy/images/1123619/spatial-binning.png">
                                </td>
                            <tr>
                                <td style="vertical-align:middle">
                                Kernel SVM
                                </td>
                                <td>
                                    $$k(x,y) = \left< \Psi(x), \Psi(y) \right>$$
                                </td>
                            </tr>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <section>
                    <h2><strong>Bag of Visual Words</strong></h2>
                    <table><tbody>
                       <tr>
                           <td>
                                <ul>
                                	<li>Feature Extraction
                                	<ul>
                                		<li>Local image feature</li>
                                		<li>Robust to typical image transformations
                                		<ul>
                                			<li>Dense SIFT 
                                			<ul>
                                				<li>SIFT at every location vs a key point</li>
                                			</ul>
                                			</li>
                                			<li>Interest points might not correspond to foreground</li>
                                		</ul>
                                		</li>
                                	</ul>
                                	</li>
                                </ul>
                           </td>
                           <td style="vertical-align:middle">
                               <img width=300 data-src="https://s3.amazonaws.com/media-p.slid.es/uploads/christopherchoy/images/1123567/feature-extraction-2.png">
                           </td>
                        </tr>
                        <tr>
                            <td>
                                <ul>
                                    <li>Clustering (Dictionary)
                    	            <ul>
                    	            	<li>Visual words should be distinctive and diverse</li>
                    	            	<li>Common visual words (wheel) will form a cluster
                    	            	<ul>
                    	            		<li>K-means clustering​</li>
                    	            	</ul>
                    	            	</li>
                    	            </ul>
                    	            </li>
                                </ul>
                            </td>
                            <td style="vertical-align:middle">
                                <img width=300 data-src="https://s3.amazonaws.com/media-p.slid.es/uploads/christopherchoy/images/1123631/cluster_1.PNG">
                            </td>
                        </tr>
                    </tbody></table>
                </section>

                <section>
                    <h2><strong>Bag of Visual Words</strong></h2>
                    <table><tbody>
                       <tr>
                           <td>
                                <ul>
                                	<li>Encoding
                                	<ul>
                                		<li>Maps local features to visual words</li>
                                		<li>Hard quantization
                                		<ul>
                                			<li>assign to the NN</li>
                                		</ul>
                                		</li>
                                	</ul>
                                	</li>
                                <ul>
                           </td>
                           <td style="vertical-align:middle">
                               <img width=300 data-src="https://s3.amazonaws.com/media-p.slid.es/uploads/christopherchoy/images/1123621/encoding.png">
                           </td>
                        </tr>
                        <tr>
                            <td>
                                <ul>
                                	<li>Spatial Pyramid
                                	<ul>
                                		<li>Encode spatial information</li>
                                		<li>Divide the image into subsections</li>
                                		<li>For each subsection, create a VW histogram</li>
                                	</ul>
                                	</li>
                                </ul>
                            </td>
                            <td style="vertical-align:middle">
                                <img width=300 data-src="https://s3.amazonaws.com/media-p.slid.es/uploads/christopherchoy/images/1123619/spatial-binning.png">
                            </td>
                        </tr>
                    </tbody></table>
                </section>

                <section>
                    <h2>Similarity Metric for Distributions</h2>
                    <p>Train a linear SVM on features (distribution): Distance metric??</p>
                    <p>How similar is a distribution $P$ from a distribution $Q$ : $f$-divergence!</p>
                    <p class="fragment">$ f : (0, \infty) \rightarrow \mathcal{R}$, convex</p>
                    <p class="fragment">$$D_f(P||Q) = \int f\left( \frac{dP}{dQ}\right) dQ$$</p>
                    <ul class="fragment">
                        <li>Kullback-Leibler Divergence
                            $$f(x) = x \log x$$</li>
                        <li>$\chi^2$ Divergence
                            $$f(x) = (x - 1)^2$$</li>
                    </ul>
                </section>
                <section>
                    <h2>For a discrete case</h2>
                    <ul>
                        <li>Intersection kernel : $k(x,y) = \sum \min(x_i, y_i)$</li>
                        <li>$\chi^2$ kernel : $k(x,y) = \frac{1}{2} \sum \frac{(x_i-y_i)^2}{x_i+y_i}$</li>
                    </ul>
                    <p>In the problem 2, we will use $\chi^2$ kernel for the similarity metric</p>
                </section>

                <section>
                    <h2>Homogeneous Kernel and Finite Approximation</h2>
                    <p>$K(\mathbf{x},\mathbf{y})$ expensive, non linear!<br>But in the feature space $\Psi(\cdot)$ it becomes linear ($\infty$ dimension)</p>
                    <ul>
                    <li class="fragment">
                    Feature map $\Psi(x)$ using the Homogeneous Kernel
                    </li>
                    <li class="fragment">
                        Generic histogram kernel is $K(\mathbf{x}, \mathbf{y}) = \sum_i k(x_i, y_i)$<br>
                    Homogeneous if $k(cx, cy) = c k(x,y)$
                    <ul>
                        <li>intersection, $\chi^2$, Hellinger's, Jensen-Shannon's</li>
                    </ul>
                    </li>
                    <li class="fragment">
                        Find a finite feature map $\hat{\Psi}(\cdot)$ that 
                        $$k(x,y) = \left< \Psi(x), \Psi(y) \right> \approx \left< \hat{\Psi}(x), \hat{\Psi}(y) \right>$$
                    </li>
                    <li class="fragment">
                        Map distributions using $\hat{\Psi}(\cdot)$ then it becomes a linear classification problem in the feature space!
                    </li>
                    </ul>
                </section>

                <section>
                    <h2>Homogeneous Kernel</h2>
                    <ul>
                        <li>Use the homogeneity, $k(x,y) = \sqrt{xy} k\left(\sqrt{x/y}, \sqrt{y/x}\right) = \sqrt{xy} \mathcal{K} \left( \log (y/x) \right)$</li>
                        <li class="fragment">Ex, intersection kernel
                            <ul>
                                <li>$k(x,y) = \min(x,y) = \sqrt{xy} \mathcal{K}(\log \frac{y}{x})$</li>
                                <li>$\mathcal{K}(w) = e^{- |w|/2}$</li>
                            </ul>
                        </li>
                        <li class="fragment">Define $\kappa (\lambda)$ as the Fourier transformation of $\mathcal{K}(w)$</li>
                        <li class="fragment">$\Psi(x) = e^{-i\lambda \log x} \sqrt{x \kappa(\lambda)}$
                            <ul>
                                <li>Continuous, infinite dimensional feature</li>
                            </ul>
                        </li>
                        <li class="fragment">Sample at points $\lambda = -nL, (-n+1)L , ..., nL$</li>
                        <li class="fragment">$\hat{\Psi}(x) \in \mathcal{R}^{2n + 1}$
                            <ul>
                                <li>$k(x,y) \approx \left< \hat{\Psi}(x), \hat{\Psi}(y) \right>$</li>
                            </ul>
                        </li>
                        <li class="fragment">In the problem 2, we use $n = 1$</li>
                        <li class="fragment"><b>vl_homkermap()</b></li>
                    </ul>
                </section> 

                <section>
                    <h2><strong>Bag of Visual Words</strong></h2>
                    <table>
                        <tbody>
                            <tr>
                                <td style="vertical-align:middle">
                                Feature Extraction
                                </td>
                                <td>
                                    <img width=150 data-src="https://s3.amazonaws.com/media-p.slid.es/uploads/christopherchoy/images/1123567/feature-extraction-2.png">
                                </td>
                            </tr>
                            <tr>
                                <td style="vertical-align:middle">
                                Clustering
                                </td>
                                <td>
                                    <img width=150 data-src="https://s3.amazonaws.com/media-p.slid.es/uploads/christopherchoy/images/1123631/cluster_1.PNG">
                                </td>
                            </tr>
                            <tr>
                                <td style="vertical-align:middle">
                                Encoding
                                </td>
                                <td>
                                    <img width=150 data-src="https://s3.amazonaws.com/media-p.slid.es/uploads/christopherchoy/images/1123621/encoding.png">
                                </td>
                            </tr>
                            <tr>
                                <td style="vertical-align:middle">
                                Spatial Binning
                                </td>
                                <td>
                                    <img width=150 data-src="https://s3.amazonaws.com/media-p.slid.es/uploads/christopherchoy/images/1123619/spatial-binning.png">
                                </td>
                            <tr>
                                <td style="vertical-align:middle">
                                Kernel SVM
                                </td>
                                <td>
                                    $$k(x,y) = \left< \Psi(x), \Psi(y) \right>$$
                                </td>
                            </tr>
                            </tr>
                        </tbody>
                    </table>
                </section>


                <section>
                    <h2><strong>Bag of Visual Words</strong></h2>
                    <ul>
                    	<li>
                    	<p>Install VL Feat, an extensive CV library</p>
                    	<ul>
                    		<li>
                    		<p><a href="http://www.vlfeat.org/" target="_blank"><span>http://www.vlfeat.org/</span></a></p>
                    		</li>
                    		<li>
                    		<p>Set up the path correctly in the starter code <span style="color:rgb(153, 0, 0); text-align:left">p2.m</span></p>
                    		</li>
                    	</ul>
                    	</li>
                    	<li>
                            <p>Vary options and see how it affects the performance</p>
                    	</li>
                    </ul>

                </section> 

                <section>
                    <ul>
                    	<li>
                    	<p><span><strong>Code </strong><span style="color:rgb(153, 0, 0)">extract_dense_sift.m</span></span></p>
                    
                    	<ul>
                    		<li>
                    		<p><span><span>Image feature extraction<span><span>​</span></span></span></span>​</p>
                    
                    		<ul>
                    			<li>
                    			<p>Dense SIFT features</p>
                    			</li>
                    			<li>​​use vl_dsift()</li>
                    		</ul>
                    		</li>
                    		<li>
                    		<p><span><span>randomly select 10,000 features</span></span></p>
                    		</li>
                    	</ul>
                    	</li>
                    	<li>
                    	<p><span><span>​​</span></span><span><strong>Code </strong><span style="color:rgb(153, 0, 0)">create_dictionary.m</span></span></p>
                    
                    	<ul>
                    		<li>
                    		<p><span><span>Create dictionary of visual words</span></span></p>
                    
                    		<ul>
                    			<li>
                    			<p><span><span>Use k-means to find the centroid of clusters. </span></span></p>
                    			</li>
                    			<li>
                    			<p><span><span style="color:rgb(17, 85, 204)">use vl_kmeans()</span></span><span style="text-align:left"> </span></p>
                    			</li>
                    		</ul>
                    		</li>
                    	</ul>
                    	</li>
                    	<li>
                    	<p><span><strong>Code </strong><span style="color:rgb(153, 0, 0)">create_histograms.m</span></span></p>
                    
                    	<ul>
                    		<li>
                    		<p><span><span>Represent images as histograms</span></span></p>
                    		</li>
                    		<li>
                    		<p><span><span>Spatial pyramid</span></span></p>
                    		</li>
                    	</ul>
                    	</li>
                    </ul>
                </section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true },
                    { src: 'plugin/math/math.js', async: true }
				]
			});

		</script>

	</body>
</html>
