---
layout: article
title: "Vim Notes"
date: 2015-01-12T19:52:-0800
modified: 2015-01-12T20:21:02-0800
categories: notes
comments: true
tags: [vim]
toc: true
exceprt:
ads: true
image:
  feature:
  teaser:
---

Useful vim commands

## Repeat n times in insert mode

<kbd>CTRL</kbd> + <kbd>o</kbd>, <kbd>i</kbd>, $(number of repetition), $(character), <kbd>ESC</kbd>

And use `$(number of repetition)=13` and `$(character)=’c’`if you want to repeat `c` 13 times
## Inserting time stamp using <kbd>F5</kbd>

Insert timestamp 2015-01-12T20:25:02-0800 ( the last element is your current timezone )
See <http://vim.wikia.com/wiki/Insert_current_date_or_time> for detail


{% highlight vim %}
:nnoremap <F5> "=strftime("%Y-%m-%dT%H:%M:%S%z")<CR>p<br>
:inoremap <F5> <C-R>=strftime("%Y-%m-%dT%H:%M:%S%z")<CR>
{% endhighlight %}


## Vim autoload change

<http://stackoverflow.com/questions/2157914/can-vim-monitor-realtime-changes-to-a-file>

check file change every 4 seconds (‘CursorHold’) and reload the buffer upon detecting change

{% highlight vim %}
set autoread
au CursorHold * checktime
{% endhighlight %}

## TAG + VIM

Create tag files uing ctags

    ctags -R

Go to file definition

<kbd>CTRL</kbd>+<kbd>]</kbd>

Back to previous file

<kbd>CTRL</kbd>+<kbd>t</kbd>

Open new split for the tag

<kbd>CTRL</kbd>+<kbd>w</kbd>, <kbd>CTRL</kbd>+<kbd>]</kbd>


## Regular expression + VIM

- Search word

    \<word\>

`\<` and `\>` indicate begining and end of the word.


- Search a regular expression from an arbitrary files

{% highlight vim %}
:lvim /{pattern}/[g][j] *.txt
:lw
{% endhighlight %}



I found the site really helpful for practicing regular expressions [^1]


## Vim freeze inside Tmux[^3]

hit <kbd>CTRL</kbd>+<kbd>S</kbd> to stop accepting input
turn on accepting input <kbd>CTRL</kbd>+<kbd>Q</kbd>

## CtrlP

<kbd>CTRL</kbd>+<kbd>v</kbd> vertical split
<kbd>CTRL</kbd>+<kbd>x</kbd> horizontal split

## Break/Merge Lines

Break long line into multiple lines with given text width.[^4]

{% highlight vim %}
set tw=79
gq{motion} % format the line that {motion} moves over
{Visual}gq % format the visually selected area
gqq        % format the current line
J          % join lines
{% endhighlight %}

## Vim Window actions

- <kbd>CTRL</kbd>+<kbd>w</kbd> + <kbd>R</kbd> Rotate window vertically
- <kbd>CTRL</kbd>+<kbd>w</kbd> + <kbd>r</kbd> Rotate window horizontally
- <kbd>CTRL</kbd>+<kbd>w</kbd> + <kbd>l</kbd> Move the current window to the far right
- <kbd>CTRL</kbd>+<kbd>w</kbd> + <kbd>h</kbd> Move the current window to the far left
- <kbd>CTRL</kbd>+<kbd>w</kbd> + <kbd>j</kbd> Move the current window to the very bottom 
- <kbd>CTRL</kbd>+<kbd>w</kbd> + <kbd>k</kbd> Move the current window to the very top
- <kbd>CTRL</kbd>+<kbd>w</kbd> + <kbd>t</kbd> <kbd>CTRL</kbd>+<kbd>w</kbd> + <kbd>K</kbd> two vertical splits to a horizontal split
- <kbd>CTRL</kbd>+<kbd>w</kbd> + <kbd>t</kbd> <kbd>CTRL</kbd>+<kbd>w</kbd> + <kbd>H</kbd> two horizontal splits to a vertical split

- <kbd>CTRL</kbd>+<kbd>w</kbd> + <kbd>t</kbd> Make the top left window current.
- <kbd>CTRL</kbd>+<kbd>w</kbd> + <kbd>K</kbd> Move the current window to full-width at the very top.
- <kbd>CTRL</kbd>+<kbd>w</kbd> + <kbd>H</kbd> Move the current window to full-height at far left.

## Clipboard Issue

I’m using `spf13-vim` package for my default vimrc setup. However, when I `ssh` to an existing tmux vim session, yank does not wokr. It turns out that the solution is to reset the `clipboard` variable.

{% highlight bash %}
:set clipboard=
{% endhighlight %}

or put the above line without colon on `.vimrc.local`[^6]


## Essential Git Bundles

- Futitive

    `Gedit commitSHA`: browse the branch or edit %:h
    `Gedit branchname:/path/to/file`: browse the file in a different branch
    `Glog`: shows the hitory of the opened file. Type `:copen` to open list of commits and browse the changes. `:cnext` and `cprev` to browse through commit history.
    `Gblame`: run git blame on the current file and see who made the latest change on the file
    `Ggrep string branchname`:  find the string in the branch `branchname` without having to checkout the branch.
    `Gbrowse`: opens up the github page containing the file that you are currently browsing on the browser.
    
    This is an essential git bundle that allows easy access to git commands. You can run all git commands inside vim and also browse history. Checkout the video on <http://vimcasts.org/e/34> <http://vimcasts.org/e/35> for tutorial.

## Vim Register[^7]

- Type `”a` to access register `a`

## Vim text wrap

If you are following PEP8 convention for python, you might want to limit the text to go over the 80 column. In vim you can set a vertical bar that shows you where the 80 column ends[^8]

{% highlight vim %}
if exists(‘+colorcolumn’)
  set colorcolumn=80
else
  au BufWinEnter * let w:m2=matchadd(‘ErrorMsg’, ‘\%>80v.\+’, -1)
endif
{% endhighlight %}


## Folding

- `zc` to close a fold
- `zo` to open a fold
- `za` to toggle


## Jumping to a Tag

First, make sure to create/update `ctags` using the following command.

{% highlight bash %}
ctags -R .
{% endhighlight %}

Then, there are several ways to navigate using tags.

- `:tag <tagname>`
- <kbd>Ctrl</kbd> + <kbd>]</kbd>: for a tag name under the cursor or a visually selected region.
- <kbd>Ctrl</kbd> + <kbd>Left Mouse Click</kbd>: click a tag name.
- <kbd>g</kbd> + <kbd>Left Mouse Click</kbd>
- <kbd>Ctrl</kbd> + <kbd>w</kbd> + <kbd>]</kbd>: open the tag location in a new window.

To return back,

- `:pop`
- <kbd>Ctrl</kbd> + <kbd>t</kbd>
- <kbd>Ctrl</kbd> + <kbd>Right Mouse Click</kbd>

To see the tag stack,

- `tags` or `tagstack`


[^1]: http://regexone.com/ 
[^2]: http://vim.wikia.com/wiki/Search_patterns
[^3]: http://superuser.com/questions/553330/vim-freezes-inside-tmux
[^4]: http://stackoverflow.com/questions/1272173/in-vim-how-do-i-break-one-really-long-line-into-multiple-lines
[^5]: http://stackoverflow.com/questions/1269603/to-switch-from-vertical-split-to-horizontal-split-fast-in-vim
[^6]: https://github.com/spf13/spf13-vim/issues/359
[^7]: http://stackoverflow.com/questions/1497958/how-to-use-vim-registers
[^8]: http://stackoverflow.com/questions/235439/vim-80-column-layout-concerns
